# 이미지 수정 
- 커밋 : 현재 컨테이너의 상태를 이미지로 저장
- 빌드 : Dockerfile을 통해 이미지를 저장

## 이미지 커밋

![이미지 커밋](<./images/이미지_커밋.png>)

## 이미지 빌드
IaC(Infrastructure as Code)
- 인프라 상태를 코드로 관리
- 프로그램이 코드를 읽어 인프라 관리

Dockerfile
- 이미지를 만드는 단계를 기재한 명세서
- 원하는 이미지 상태를 코드로 작성
- docker build 명령을 통해 이미지 생성
![도커 파일로 이미지 생성](<./images/dockerfile_create_image.png>)
## commit과 build
![commit과 build](<./images/commit과 build.png>)

## 빌드 컨텍스트
이미지 빌드 방식은 도커 데몬이 임시 컨테이너를 실행시키면서 레이어드를 하나씩 추가한다.
그래서 도커 데몬에게 도커 파일과 빌드에 사용되는 파일들을 전달해 주어야 한다.
이렇게 도커 데몬에게 전달해 주는 폴더가 빌드 컨텍스트이다.

1. 빌드 명령 시 도커 데몬에 지정한 폴더 전달
2. 빌드 컨텍스트의 Dockerfile로 빌드 시작, FROM의 베이스 이미지로 임시 컨테이너 생성
3. 베이스 이미지로 실행한 임시 컨테이너에 COPY 실행

주의 사항
- 빌드 컨텍스트는 도커 데몬에게 전달돼야 하기 때문에 빌드 컨텍스트의 크기가 커질수록 전송시간이 길어지고 이 폴더의 

**.dockerignore**
- `.dockerignore` 의 파일 리스트는 빌드 컨텍스트에 전달하지 않음
- 빌드에 필요하지 않은 파일을 제외할 수 있다